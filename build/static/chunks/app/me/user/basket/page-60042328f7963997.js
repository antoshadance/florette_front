(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[860],{535:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var l=r(5155),s=r(8368),a=r(6460),c=r.n(a),n=r(767),i=r(6710),o=r(8173),d=r.n(o);r(6046);var h=r(2115),x=r(9947);let m=()=>{let[e,t]=(0,h.useState)(!1),{user:r}=(0,x.J)();function a(){t(!e)}return(0,l.jsxs)("nav",{className:"z-[99] h-[100px] w-[100vw] flex bg-transparent backdrop-blur-[2px] border-b border-black/5 justify-between items-center px-2 lg:px-12 text-white fixed top-0",children:[(0,l.jsx)(d(),{href:"/",children:(0,l.jsx)("h2",{className:(0,s.cn)(c().className," uppercase text-3xl lg:text-4xl hover:text-[#dadada] transition-all"),children:"Florette"})}),(0,l.jsxs)("ul",{className:"lg:flex items-center gap-x-12 font-light hidden",children:[(0,l.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,l.jsx)(d(),{href:"/",children:"Главная"})}),(0,l.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,l.jsx)(d(),{href:"/#about_us",children:"О нас"})}),(0,l.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,l.jsx)(d(),{href:"/catalog",children:"Каталог"})}),r&&"user"==r.role&&(0,l.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,l.jsx)(d(),{href:"/me/user/basket",children:"Корзина"})}),(0,l.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,l.jsx)(d(),{href:r?"/me":"/auth",children:"Личный кабинет"})})]}),(0,l.jsxs)("div",{id:"nav_mob_panel",className:(0,s.cn)("lg:hidden flex flex-col gap-y-40 py-8 pl-8 pr-4 h-[100vh] w-[80vw] absolute top-0 bg-black/90 transition-all",e?"right-0":"right-[-80vw]"),children:[(0,l.jsx)(n.A,{onClick:a,size:32,className:"shrink-0 self-end",strokeWidth:1.5}),(0,l.jsxs)("ul",{className:"flex flex-col gap-y-8 font-light",children:[(0,l.jsx)("li",{children:(0,l.jsx)(d(),{onClick:a,href:"/",children:"Главная"})}),(0,l.jsx)("li",{children:(0,l.jsx)(d(),{onClick:a,href:"/#about_us",children:"О нас"})}),(0,l.jsx)("li",{children:(0,l.jsx)(d(),{onClick:a,href:"/catalog",children:"Каталог"})}),r&&"user"==r.role&&(0,l.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,l.jsx)(d(),{href:"/me/user/basket",children:"Корзина"})}),(0,l.jsx)("li",{children:(0,l.jsx)(d(),{onClick:a,href:r?"/me":"/auth",children:"Личный кабинет"})})]})]}),(0,l.jsx)(i.A,{className:"lg:hidden",onClick:a})]})}},767:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(7401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2718:(e,t,r)=>{Promise.resolve().then(r.bind(r,7390))},2922:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});class l extends Error{}function s(e,t){let r;if("string"!=typeof e)throw new l("Invalid token specified: must be a string");t||(t={});let s=+(!0!==t.header),a=e.split(".")[s];if("string"!=typeof a)throw new l(`Invalid token specified: missing part #${s+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(a)}catch(e){throw new l(`Invalid token specified: invalid base64 for part #${s+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new l(`Invalid token specified: invalid json for part #${s+1} (${e.message})`)}}l.prototype.name="InvalidTokenError"},4522:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var l=r(5155),s=r(8368);function a(e){let{className:t,...r}=e;return(0,l.jsx)("div",{"data-slot":"skeleton",className:(0,s.cn)("bg-primary/10 animate-pulse rounded-md",t),...r})}},5570:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var l=r(5155),s=r(8368),a=r(6460),c=r.n(a),n=r(8173),i=r.n(n);let o=()=>(0,l.jsxs)("footer",{className:"w-[100vw] lg:h-[120px] px-4 lg:px-12 py-4 text-white bg-[#293230] flex flex-col gap-y-8 lg:flex-row lg:items-center justify-between",children:[(0,l.jsx)(i(),{href:"/",children:(0,l.jsx)("h2",{className:(0,s.cn)(c().className,"uppercase text-4xl text-left"),children:"Florette"})}),(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row gap-y-6 gap-x-24",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,l.jsx)("h3",{className:"underline",children:"Адрес"}),(0,l.jsx)("p",{children:"Красноярск, ул. Маяковского, 21"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,l.jsx)("h3",{className:"underline",children:"Телефон"}),(0,l.jsx)("p",{children:"+7 (123) 123 11 22"})]})]})]})},6046:(e,t,r)=>{"use strict";var l=r(6658);r.o(l,"redirect")&&r.d(t,{redirect:function(){return l.redirect}}),r.o(l,"useParams")&&r.d(t,{useParams:function(){return l.useParams}})},6460:e=>{e.exports={style:{fontFamily:"'Playfair Display', 'Playfair Display Fallback'",fontStyle:"normal"},className:"__className_831efe"}},6710:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(7401).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},7390:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var l=r(5155),s=r(5570),a=r(535),c=r(9947),n=r(6046),i=r(2115),o=r(8368),d=r(6460),h=r.n(d),x=r(767),m=r(9053),u=r(4522);let f=()=>{let{user:e,login:t,logout:r}=(0,c.J)();return(0,i.useEffect)(()=>{console.log(e.basketId),e||(0,n.redirect)("/auth"),e&&"user"!==e.role&&(0,n.redirect)("/me/admin")},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.A,{}),(0,l.jsx)(()=>{let[t,s]=(0,i.useState)("-"),[a,c]=(0,i.useState)(void 0);function d(){fetch("".concat("http://45.12.145.247:3001","/getbasket/").concat(e.basketId)).then(e=>e.json()).then(e=>{console.log(e),c(e.map(e=>({id:e.id,img:e.product.img,name:e.product.name,price:e.product.price})))})}(0,i.useEffect)(()=>{d()},[]);let f=e=>(0,l.jsxs)("div",{className:"w-full h-[150px] flex justify-between",children:[(0,l.jsx)("img",{className:"w-1/2 lg:w-[20%] h-full object-cover",src:e.src?"http://45.12.145.247:3001/"+e.src:"/orchid.jpg"}),(0,l.jsxs)("div",{className:"lg:w-[60%] hidden lg:flex justify-between px-1",children:[(0,l.jsxs)("div",{className:"w-[20%] h-full  flex flex-col gap-y-6",children:[(0,l.jsx)("h3",{className:"uppercase text-center",children:"Наименование"}),(0,l.jsx)("p",{className:(0,o.cn)(h().className,"text-center text-xl"),children:e.name?e.name:"lksf"})]}),(0,l.jsxs)("div",{className:"w-[20%] h-full flex flex-col gap-y-6",children:[(0,l.jsx)("h3",{className:"uppercase text-center",children:"Цена"}),(0,l.jsx)("p",{className:(0,o.cn)("text-center"),children:e.price?new Intl.NumberFormat("ru-RU",{maximumSignificantDigits:3}).format(e.price)+" ₽":"- ₽"})]})]}),(0,l.jsxs)("div",{className:"w-1/2 lg:w-[20%] h-full flex flex-col gap-y-2 items-end",children:[(0,l.jsx)(x.A,{strokeWidth:1.5,onClick:e.delete,role:"button",className:"hover:text-[#ccc] cursor-pointer transition-all"}),(0,l.jsx)("p",{className:(0,o.cn)(h().className,"block lg:hidden text-end text-sm"),children:e.name?e.name:"lksf"}),(0,l.jsx)("p",{className:(0,o.cn)("text-center"),children:e.price?new Intl.NumberFormat("ru-RU",{maximumSignificantDigits:3}).format(e.price)+" ₽":"- ₽"})]})]});(0,i.useEffect)(()=>{a&&a.length>0&&s(a.map(e=>e.price).reduce((e,t)=>e+t,0))},[a]);let p=e=>{fetch("".concat("http://45.12.145.247:3001","/delete-basket-product/").concat(e)).then(e=>e.json).then(e=>console.log(e)).then(()=>d())};return(0,l.jsxs)("div",{className:"w-[100vw] h-[100vh] flex items-center justify-between text-white pt-[120px] pb-6 px-4 lg:px-24",children:[(0,l.jsxs)("div",{className:"w-1/3 h-full  border-r border-[#fff]/25 pr-4 flex flex-col justify-between",children:[(0,l.jsx)("div",{className:"flex flex-col gap-y-6",children:(0,l.jsxs)("ul",{className:"flex flex-col gap-y-6",children:[(0,l.jsx)("li",{className:(0,o.cn)("cursor-pointer px-4 py-2 rounded-sm bg-[#ccc] transition-all text-black"),onClick:()=>(0,n.redirect)("/me/user/basket"),children:"Корзина"}),(0,l.jsx)("li",{className:(0,o.cn)("cursor-pointer px-4 py-2 rounded-sm hover:bg-white hover transition-all hover:text-black"),onClick:()=>(0,n.redirect)("/me/user/order"),children:"Оформить заказ"})]})}),(0,l.jsxs)("div",{className:"hover:text-[#ccc] transition-all flex gap-x-4 mb-6 cursor-pointer",role:"button",onClick:r,children:[(0,l.jsx)("p",{children:"Выйти из аккаунта"}),(0,l.jsx)(m.A,{strokeWidth:1.5,className:"shrink-0"})]})]}),(0,l.jsxs)("div",{className:"w-2/3 h-full pl-4 flex flex-col gap-y-4 hideyscroll overflow-scroll",children:[void 0==a&&(0,l.jsx)(u.E,{className:"w-full h-[120px]"}),a&&a.map((e,t)=>(0,l.jsx)(f,{id:e.id,src:e.img,name:e.name,price:e.price,delete:()=>p(e.id)},e.id)),a&&a.length>0&&(0,l.jsx)(()=>(0,l.jsxs)("div",{className:"w-full h-[100px] flex flex-col gap-y-4 items-end justify-start pt-4  border-t border-white/25",children:[(0,l.jsx)("h4",{className:"uppercase font-medium",children:"Итого"}),(0,l.jsx)("p",{children:"number"==typeof t&&new Intl.NumberFormat("ru-RU",{maximumSignificantDigits:3}).format(t)+" ₽"})]}),{})]})]})},{}),(0,l.jsx)(s.A,{})]})}},7401:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var l=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,l.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:d,iconNode:h,...x}=e;return(0,l.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:r,strokeWidth:i?24*Number(n)/Number(s):n,className:a("lucide",o),...x},[...h.map(e=>{let[t,r]=e;return(0,l.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let r=(0,l.forwardRef)((r,c)=>{let{className:i,...o}=r;return(0,l.createElement)(n,{ref:c,iconNode:t,className:a("lucide-".concat(s(e)),i),...o})});return r.displayName="".concat(e),r}},8368:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var l=r(3463),s=r(9795);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,l.$)(t))}},9053:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(7401).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},9947:(e,t,r)=>{"use strict";r.d(t,{J:()=>o,O:()=>i});var l=r(5155),s=r(2115),a=r(2922),c=r(6046);let n=(0,s.createContext)(),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)(void 0);return(0,s.useEffect)(()=>{let e=localStorage.getItem("user");i(e?(0,a.s)(e):void 0)},[]),(0,l.jsx)(n.Provider,{value:{user:r,login:function(e,t){return console.log(e),fetch("".concat("http://45.12.145.247:3001","/").concat(t),{method:"post",body:e,headers:{"Content-Type":"application/json"}}).then(e=>200==e.status&&e.json()).then(e=>{let{token:t}=e;t&&localStorage.setItem("user",t)}).then(()=>{i((0,a.s)(localStorage.getItem("user")))}).catch(e=>{console.log(e)}),(0,c.redirect)("/me")},logout:()=>{localStorage.removeItem("user"),i(),(0,c.redirect)("/")}},children:t})},o=()=>(0,s.useContext)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[161,181,441,587,358],()=>t(2718)),_N_E=e.O()}]);
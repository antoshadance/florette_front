(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{535:(e,t,l)=>{"use strict";l.d(t,{A:()=>x});var r=l(5155),s=l(8368),n=l(6460),a=l.n(n),i=l(767),c=l(6710),o=l(8173),d=l.n(o);l(6046);var u=l(2115),h=l(9947);let x=()=>{let[e,t]=(0,u.useState)(!1),{user:l}=(0,h.J)();function n(){t(!e)}return(0,r.jsxs)("nav",{className:"z-[99] h-[100px] w-[100vw] flex bg-transparent backdrop-blur-[2px] border-b border-black/5 justify-between items-center px-2 lg:px-12 text-white fixed top-0",children:[(0,r.jsx)(d(),{href:"/",children:(0,r.jsx)("h2",{className:(0,s.cn)(a().className," uppercase text-3xl lg:text-4xl hover:text-[#dadada] transition-all"),children:"Florette"})}),(0,r.jsxs)("ul",{className:"lg:flex items-center gap-x-12 font-light hidden",children:[(0,r.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,r.jsx)(d(),{href:"/",children:"Главная"})}),(0,r.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,r.jsx)(d(),{href:"/#about_us",children:"О нас"})}),(0,r.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,r.jsx)(d(),{href:"/catalog",children:"Каталог"})}),l&&"user"==l.role&&(0,r.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,r.jsx)(d(),{href:"/me/user/basket",children:"Корзина"})}),(0,r.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,r.jsx)(d(),{href:l?"/me":"/auth",children:"Личный кабинет"})})]}),(0,r.jsxs)("div",{id:"nav_mob_panel",className:(0,s.cn)("lg:hidden flex flex-col gap-y-40 py-8 pl-8 pr-4 h-[100vh] w-[80vw] absolute top-0 bg-black/90 transition-all",e?"right-0":"right-[-80vw]"),children:[(0,r.jsx)(i.A,{onClick:n,size:32,className:"shrink-0 self-end",strokeWidth:1.5}),(0,r.jsxs)("ul",{className:"flex flex-col gap-y-8 font-light",children:[(0,r.jsx)("li",{children:(0,r.jsx)(d(),{onClick:n,href:"/",children:"Главная"})}),(0,r.jsx)("li",{children:(0,r.jsx)(d(),{onClick:n,href:"/#about_us",children:"О нас"})}),(0,r.jsx)("li",{children:(0,r.jsx)(d(),{onClick:n,href:"/catalog",children:"Каталог"})}),l&&"user"==l.role&&(0,r.jsx)("li",{className:"hover:text-[#ccc] transition-all",children:(0,r.jsx)(d(),{href:"/me/user/basket",children:"Корзина"})}),(0,r.jsx)("li",{children:(0,r.jsx)(d(),{onClick:n,href:l?"/me":"/auth",children:"Личный кабинет"})})]})]}),(0,r.jsx)(c.A,{className:"lg:hidden",onClick:n})]})}},767:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});let r=(0,l(7401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1027:(e,t,l)=>{"use strict";l.d(t,{F:()=>a});var r=l(3463);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=r.$,a=(e,t)=>l=>{var r;if((null==t?void 0:t.variants)==null)return n(e,null==l?void 0:l.class,null==l?void 0:l.className);let{variants:a,defaultVariants:i}=t,c=Object.keys(a).map(e=>{let t=null==l?void 0:l[e],r=null==i?void 0:i[e];if(null===t)return null;let n=s(t)||s(r);return a[e][n]}),o=l&&Object.entries(l).reduce((e,t)=>{let[l,r]=t;return void 0===r||(e[l]=r),e},{});return n(e,c,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:l,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,l]=e;return Array.isArray(l)?l.includes({...i,...o}[t]):({...i,...o})[t]===l})?[...e,l,r]:e},[]),null==l?void 0:l.class,null==l?void 0:l.className)}},2317:(e,t,l)=>{"use strict";l.d(t,{DX:()=>a});var r=l(2115),s=l(8068),n=l(5155),a=r.forwardRef((e,t)=>{let{children:l,...s}=e,a=r.Children.toArray(l),c=a.find(o);if(c){let e=c.props.children,l=a.map(t=>t!==c?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,n.jsx)(i,{...s,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,l):null})}return(0,n.jsx)(i,{...s,ref:t,children:l})});a.displayName="Slot";var i=r.forwardRef((e,t)=>{let{children:l,...n}=e;if(r.isValidElement(l)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=t&&"isReactWarning"in t&&t.isReactWarning;return l?e.ref:(l=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(l),a=function(e,t){let l={...t};for(let r in t){let s=e[r],n=t[r];/^on[A-Z]/.test(r)?s&&n?l[r]=(...e)=>{n(...e),s(...e)}:s&&(l[r]=s):"style"===r?l[r]={...s,...n}:"className"===r&&(l[r]=[s,n].filter(Boolean).join(" "))}return{...e,...l}}(n,l.props);return l.type!==r.Fragment&&(a.ref=t?(0,s.t)(t,e):e),r.cloneElement(l,a)}return r.Children.count(l)>1?r.Children.only(null):null});i.displayName="SlotClone";var c=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function o(e){return r.isValidElement(e)&&e.type===c}},2922:(e,t,l)=>{"use strict";l.d(t,{s:()=>s});class r extends Error{}function s(e,t){let l;if("string"!=typeof e)throw new r("Invalid token specified: must be a string");t||(t={});let s=+(!0!==t.header),n=e.split(".")[s];if("string"!=typeof n)throw new r(`Invalid token specified: missing part #${s+1}`);try{l=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var l;return l=t,decodeURIComponent(atob(l).replace(/(.)/g,(e,t)=>{let l=t.charCodeAt(0).toString(16).toUpperCase();return l.length<2&&(l="0"+l),"%"+l}))}catch(e){return atob(t)}}(n)}catch(e){throw new r(`Invalid token specified: invalid base64 for part #${s+1} (${e.message})`)}try{return JSON.parse(l)}catch(e){throw new r(`Invalid token specified: invalid json for part #${s+1} (${e.message})`)}}r.prototype.name="InvalidTokenError"},3800:(e,t,l)=>{Promise.resolve().then(l.bind(l,5700))},4522:(e,t,l)=>{"use strict";l.d(t,{E:()=>n});var r=l(5155),s=l(8368);function n(e){let{className:t,...l}=e;return(0,r.jsx)("div",{"data-slot":"skeleton",className:(0,s.cn)("bg-primary/10 animate-pulse rounded-md",t),...l})}},5570:(e,t,l)=>{"use strict";l.d(t,{A:()=>o});var r=l(5155),s=l(8368),n=l(6460),a=l.n(n),i=l(8173),c=l.n(i);let o=()=>(0,r.jsxs)("footer",{className:"w-[100vw] lg:h-[120px] px-4 lg:px-12 py-4 text-white bg-[#293230] flex flex-col gap-y-8 lg:flex-row lg:items-center justify-between",children:[(0,r.jsx)(c(),{href:"/",children:(0,r.jsx)("h2",{className:(0,s.cn)(a().className,"uppercase text-4xl text-left"),children:"Florette"})}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-y-6 gap-x-24",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,r.jsx)("h3",{className:"underline",children:"Адрес"}),(0,r.jsx)("p",{children:"Красноярск, ул. Маяковского, 21"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,r.jsx)("h3",{className:"underline",children:"Телефон"}),(0,r.jsx)("p",{children:"+7 (123) 123 11 22"})]})]})]})},5700:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>m});var r=l(5155),s=l(5570),n=l(535),a=l(9947),i=l(6046),c=l(2115),o=l(8368),d=l(6460),u=l.n(d),h=l(767),x=l(9053),f=l(4522),p=l(9871);let m=()=>{let{user:e,login:t,logout:l}=(0,a.J)();return(0,c.useEffect)(()=>{e||(0,i.redirect)("/auth"),e&&"user"!==e.role&&(0,i.redirect)("/me/admin")},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.A,{}),(0,r.jsx)(()=>{let[t,s]=(0,c.useState)("-"),[n,a]=(0,c.useState)(void 0);function d(){fetch("".concat("http://45.12.145.247:3001","/getbasket/").concat(e.basketId)).then(e=>e.json()).then(e=>{a(e.map(e=>({id:e.id,img:e.product.img,name:e.product.name,price:e.product.price})))})}(0,c.useEffect)(()=>{d()},[]);let[m,g]=(0,c.useState)(!1),v=e=>(0,r.jsxs)("div",{className:"w-full h-[150px] flex justify-between",children:[(0,r.jsx)("img",{className:"w-1/2 lg:w-[20%] h-full object-cover",src:e.src?"http://45.12.145.247:3001/"+e.src:"/orchid.jpg"}),(0,r.jsxs)("div",{className:"lg:w-[60%] hidden lg:flex justify-between px-1",children:[(0,r.jsxs)("div",{className:"w-[20%] h-full  flex flex-col gap-y-6",children:[(0,r.jsx)("h3",{className:"uppercase text-center",children:"Наименование"}),(0,r.jsx)("p",{className:(0,o.cn)(u().className,"text-center text-xl"),children:e.name?e.name:"lksf"})]}),(0,r.jsxs)("div",{className:"w-[20%] h-full flex flex-col gap-y-6",children:[(0,r.jsx)("h3",{className:"uppercase text-center",children:"Цена"}),(0,r.jsx)("p",{className:(0,o.cn)("text-center"),children:e.price?new Intl.NumberFormat("ru-RU",{maximumSignificantDigits:3}).format(e.price)+" ₽":"- ₽"})]})]}),(0,r.jsxs)("div",{className:"w-1/2 lg:w-[20%] h-full flex flex-col gap-y-2 items-end",children:[(0,r.jsx)(h.A,{strokeWidth:1.5,onClick:e.delete,role:"button",className:"hover:text-[#ccc] cursor-pointer transition-all"}),(0,r.jsx)("p",{className:(0,o.cn)(u().className,"block lg:hidden text-end text-sm"),children:e.name?e.name:"lksf"}),(0,r.jsx)("p",{className:(0,o.cn)("text-center"),children:e.price?new Intl.NumberFormat("ru-RU",{maximumSignificantDigits:3}).format(e.price)+" ₽":"- ₽"})]})]});(0,c.useEffect)(()=>{n&&n.length>0&&s(n.map(e=>e.price).reduce((e,t)=>e+t,0))},[n]);let j=e=>{fetch("".concat("http://45.12.145.247:3001","/delete-basket-product/").concat(e)).then(e=>e.json).then(e=>console.log(e)).then(()=>d())},[b,y]=(0,c.useState)({name:"",phone:"",adress:""});function w(e){y({...b,[e.target.id]:e.target.value})}return(0,r.jsxs)("div",{className:"w-[100vw] h-[100vh] flex items-center justify-between text-white pt-[120px] pb-6 px-4 lg:px-24",children:[(0,r.jsxs)("div",{className:"w-1/3 h-full  border-r border-[#fff]/25 pr-4 flex flex-col justify-between",children:[(0,r.jsx)("div",{className:"flex flex-col gap-y-6",children:(0,r.jsxs)("ul",{className:"flex flex-col gap-y-6",children:[(0,r.jsx)("li",{className:(0,o.cn)("cursor-pointer px-4 py-2 rounded-sm hover:bg-white transition-all hover:text-black"),onClick:()=>(0,i.redirect)("/me/user/basket"),children:"Корзина"}),(0,r.jsx)("li",{className:(0,o.cn)("cursor-pointer px-4 py-2 rounded-sm bg-[#ccc]  transition-all text-black"),onClick:()=>(0,i.redirect)("/me/user/order"),children:"Оформить заказ"})]})}),(0,r.jsxs)("div",{className:"hover:text-[#ccc] transition-all flex gap-x-4 mb-6 cursor-pointer",role:"button",onClick:l,children:[(0,r.jsx)("p",{children:"Выйти из аккаунта"}),(0,r.jsx)(x.A,{strokeWidth:1.5,className:"shrink-0"})]})]}),m?(0,r.jsxs)("div",{className:"w-2/3 h-full pl-4 flex flex-col gap-y-12 justify-center",children:[(0,r.jsx)("h2",{className:"text-4xl",children:"Благодарим за заказ!"}),(0,r.jsx)("p",{children:"Оператор свяжется с вам и уточнит остальные детали"})]}):(0,r.jsxs)("div",{className:"w-2/3 h-full pl-4 flex flex-col justify-between gap-y-6",children:[(0,r.jsxs)("div",{className:"w-full h-full lg:h-1/2 flex flex-col gap-y-4 overflow-scroll hideyscroll",children:[void 0==n&&(0,r.jsx)(f.E,{className:"w-full h-[120px]"}),n&&n.map((e,t)=>(0,r.jsx)(v,{id:e.id,src:e.img,name:e.name,price:e.price,delete:()=>j(e.id)},e.id)),n&&n.length>0&&(0,r.jsx)(()=>(0,r.jsxs)("div",{className:"w-full h-[100px] flex flex-col gap-y-4 items-end justify-start pt-4  border-t border-white/25",children:[(0,r.jsx)("h4",{className:"uppercase font-medium",children:"Итого"}),(0,r.jsx)("p",{children:"number"==typeof t&&new Intl.NumberFormat("ru-RU",{maximumSignificantDigits:10}).format(t)+" ₽"})]}),{})]}),(0,r.jsxs)("div",{className:"w-full lg:h-2/5 flex flex-col gap-y-4 lg:gap-y-6 justify-between",children:[(0,r.jsx)("h3",{className:"uppercase text-2xl",children:"Оформление заказа"}),(0,r.jsxs)("form",{onSubmit:t=>{t.preventDefault(),console.log(b),fetch("".concat("http://45.12.145.247:3001","/clearbasket/").concat(e.basketId)).then(e=>e.json).then(e=>{console.log(e),g(!0),y({name:"",phone:"",adress:""})}).then(()=>d())},className:"flex flex-col gap-y-4 lg:gap-y-0 lg:flex-wrap h-full justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-4 lg:flex-row w-full justify-between",children:[(0,r.jsxs)("div",{className:"w-2/3 lg:w-fit flex flex-col gap-y-2",children:[(0,r.jsx)("label",{className:"font-light",children:"Имя получателя"}),(0,r.jsx)("input",{id:"name",onChange:w,value:b.name,className:"bg-black/25 rounded-sm p-2 focus:outline-none"})]}),(0,r.jsxs)("div",{className:"w-2/3 lg:w-fit flex flex-col gap-y-2",children:[(0,r.jsx)("label",{className:"font-light",children:"Телефон получателя"}),(0,r.jsx)("input",{id:"phone",onChange:w,value:b.phone,className:"bg-black/25 rounded-sm p-2 focus:outline-none"})]}),(0,r.jsxs)("div",{className:"w-2/3 lg:w-fit flex flex-col gap-y-2",children:[(0,r.jsx)("label",{className:"font-light",children:"Адрес доставки"}),(0,r.jsx)("input",{id:"adress",onChange:w,value:b.adress,className:"bg-black/25 rounded-sm p-2 focus:outline-none"})]})]}),n&&n.length>0?(0,r.jsx)(p.$,{className:"cursor-pointer w-2/3 mt-24 self-end",variant:"secondary",children:"Оформить заказ"}):(0,r.jsx)(p.$,{disabled:!0,className:"cursor-pointer w-2/3 mt-24 self-end",variant:"secondary",children:"Оформить заказ"})]})]})]})]})},{}),(0,r.jsx)(s.A,{})]})}},6046:(e,t,l)=>{"use strict";var r=l(6658);l.o(r,"redirect")&&l.d(t,{redirect:function(){return r.redirect}}),l.o(r,"useParams")&&l.d(t,{useParams:function(){return r.useParams}})},6460:e=>{e.exports={style:{fontFamily:"'Playfair Display', 'Playfair Display Fallback'",fontStyle:"normal"},className:"__className_831efe"}},6710:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});let r=(0,l(7401).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},7401:(e,t,l)=>{"use strict";l.d(t,{A:()=>c});var r=l(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return t.filter((e,t,l)=>!!e&&""!==e.trim()&&l.indexOf(e)===t).join(" ").trim()};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:l="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...a,width:s,height:s,stroke:l,strokeWidth:c?24*Number(i)/Number(s):i,className:n("lucide",o),...h},[...u.map(e=>{let[t,l]=e;return(0,r.createElement)(t,l)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let l=(0,r.forwardRef)((l,a)=>{let{className:c,...o}=l;return(0,r.createElement)(i,{ref:a,iconNode:t,className:n("lucide-".concat(s(e)),c),...o})});return l.displayName="".concat(e),l}},8068:(e,t,l)=>{"use strict";l.d(t,{s:()=>a,t:()=>n});var r=l(2115);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function n(...e){return t=>{let l=!1,r=e.map(e=>{let r=s(e,t);return l||"function"!=typeof r||(l=!0),r});if(l)return()=>{for(let t=0;t<r.length;t++){let l=r[t];"function"==typeof l?l():s(e[t],null)}}}}function a(...e){return r.useCallback(n(...e),e)}},8368:(e,t,l)=>{"use strict";l.d(t,{cn:()=>n});var r=l(3463),s=l(9795);function n(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return(0,s.QP)((0,r.$)(t))}},9053:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});let r=(0,l(7401).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},9871:(e,t,l)=>{"use strict";l.d(t,{$:()=>c});var r=l(5155);l(2115);var s=l(2317),n=l(1027),a=l(8368);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:l,size:n,asChild:c=!1,...o}=e,d=c?s.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,a.cn)(i({variant:l,size:n,className:t})),...o})}},9947:(e,t,l)=>{"use strict";l.d(t,{J:()=>o,O:()=>c});var r=l(5155),s=l(2115),n=l(2922),a=l(6046);let i=(0,s.createContext)(),c=e=>{let{children:t}=e,[l,c]=(0,s.useState)(void 0);return(0,s.useEffect)(()=>{let e=localStorage.getItem("user");c(e?(0,n.s)(e):void 0)},[]),(0,r.jsx)(i.Provider,{value:{user:l,login:function(e,t){return console.log(e),fetch("".concat("http://45.12.145.247:3001","/").concat(t),{method:"post",body:e,headers:{"Content-Type":"application/json"}}).then(e=>200==e.status&&e.json()).then(e=>{let{token:t}=e;t&&localStorage.setItem("user",t)}).then(()=>{c((0,n.s)(localStorage.getItem("user")))}).catch(e=>{console.log(e)}),(0,a.redirect)("/me")},logout:()=>{localStorage.removeItem("user"),c(),(0,a.redirect)("/")}},children:t})},o=()=>(0,s.useContext)(i)}},e=>{var t=t=>e(e.s=t);e.O(0,[161,181,441,587,358],()=>t(3800)),_N_E=e.O()}]);